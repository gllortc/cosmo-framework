<?xml version="1.0" encoding="UTF-8"?>

<cosmo-sql cdt-ver="1.0" ver="1.0">

   <!-- POSTGRESQL -->
   <definition language="PostgreSQL" driver="org.postgresql.Driver">
      
      <sentence id="CosmoUserProvider.login.1">
         SELECT *
         FROM   sys_users
         WHERE  Lower(usrlogin) = '%s' And usrpwd = '%s'
      </sentence>
      
      <sentence id="CosmoUserProvider.login.2">
         UPDATE sys_users 
         SET    usrlastlogin = current_timestamp, 
                usrlogoncount = usrlogoncount + 1 
         WHERE  usrid = %s
      </sentence>
      
      <sentence id="CosmoUserProvider.add.1">
         SELECT Count(*) 
         FROM   sys_users 
         WHERE  Lower(usrlogin) = '%s' Or Lower(usrmail)  = '%s'
      </sentence>
      
      <sentence id="CosmoUserProvider.add.2">
         INSERT INTO sys_users (usrlogin, usrmail, usrpwd, usrname, usrcity, usroptions, usrstatus, usrcreated, usrlastlogin, usrlogoncount) 
         VALUES ('%s', '%s', '%s', '%s', '%s', 0, %s, current_timestamp, null, 0)
      </sentence>
      
   </definition>
   
   <!-- ORACLE -->
   <definition language="Oracle" driver="oracle.jdbc.driver.OracleDriver" />
    
</cosmo-sql>
